# 40_edge_cases.md - 例外ケース集

## このファイルの目的
通常フローでは対応できない例外ケースの一覧と対処方法を集約する

## 対象読者
- 運用担当者（例外発生時の対応）
- RPA開発者（自動化の境界を理解）
- 問い合わせ対応者（回答の根拠）

## 更新ルール
- **正本**: このファイルが例外ケースの正本
- **追記**: 新しい例外ケースは末尾に追加。過去の問い合わせから収集
- **標準手順との関係**: 標準手順は [30_application_howto.md](./30_application_howto.md) を参照

---

## 1. 例外ケース一覧

### 1.1 カテゴリ別一覧

| カテゴリ | ケース数 | 詳細 |
|---------|---------|------|
| 締め処理関連 | TBD | [2.1参照](#21-締め処理関連) |
| 権限関連 | TBD | [2.2参照](#22-権限関連) |
| 打刻関連 | TBD | [2.3参照](#23-打刻関連) |
| 申請関連 | TBD | [2.4参照](#24-申請関連) |
| 承認関連 | TBD | [2.5参照](#25-承認関連) |
| その他 | TBD | [2.6参照](#26-その他) |

---

## 2. 例外ケース詳細

### 2.1 締め処理関連

#### EC-締01: 締め後の勤怠修正

| 項目 | 内容 |
|------|------|
| **ケース名** | 締め後の勤怠修正 |
| **発生条件** | 月次締め処理完了後に勤怠データの修正が必要になった |
| **影響** | 給与計算に影響する可能性あり |
| **RPA対応** | ❌ 不可（手動対応必須） |
| **対処手順** | 1. 管理者権限で締め解除<br>2. 修正申請<br>3. 再締め処理 |
| **必要権限** | システム管理者 or 人事管理者 |
| **備考** | 給与計算済みの場合は経理部門との調整が必要 |

#### EC-締02: 締め忘れ（期限超過）

| 項目 | 内容 |
|------|------|
| **ケース名** | 締め忘れ（期限超過） |
| **発生条件** | 締め期限を過ぎても締め処理が行われていない |
| **影響** | 給与計算の遅延 |
| **RPA対応** | TBD |
| **対処手順** | 1. 未締め者の確認<br>2. 督促<br>3. 代理締め（権限があれば） |
| **必要権限** | 管理者 |
| **備考** | - |

---

### 2.2 権限関連

#### EC-権01: 承認権限がない

| 項目 | 内容 |
|------|------|
| **ケース名** | 承認権限がない |
| **発生条件** | 申請を承認しようとしたが権限がない |
| **影響** | 申請が滞留 |
| **RPA対応** | ❌ 不可 |
| **対処手順** | 1. 権限保有者に依頼<br>2. または権限付与を依頼 |
| **必要権限** | - |
| **備考** | 組織変更直後に発生しやすい |

#### EC-権02: 自分の申請を自分で承認

| 項目 | 内容 |
|------|------|
| **ケース名** | 自分の申請を自分で承認 |
| **発生条件** | 管理者が自分の申請を承認しようとした |
| **影響** | 内部統制上の問題 |
| **RPA対応** | ❌ 不可 |
| **対処手順** | 上位承認者または別の管理者に依頼 |
| **必要権限** | - |
| **備考** | システムで制御されている場合もある |

---

### 2.3 打刻関連

#### EC-打01: 打刻漏れ（出勤・退勤両方なし）

| 項目 | 内容 |
|------|------|
| **ケース名** | 打刻漏れ（出勤・退勤両方なし） |
| **発生条件** | 出勤したが打刻が一切ない |
| **影響** | 勤怠データが不完全 |
| **RPA対応** | TBD |
| **対処手順** | 1. 本人に確認<br>2. 打刻修正申請<br>3. 承認 |
| **必要権限** | 一般ユーザー（申請）、承認者（承認） |
| **備考** | - |

#### EC-打02: 二重打刻

| 項目 | 内容 |
|------|------|
| **ケース名** | 二重打刻 |
| **発生条件** | 同じ日に出勤打刻が2回以上ある |
| **影響** | 勤怠データが不正確 |
| **RPA対応** | TBD |
| **対処手順** | 1. どちらが正しいか確認<br>2. 不要な打刻を削除（管理者） |
| **必要権限** | 管理者 |
| **備考** | - |

#### EC-打03: 深夜・早朝の打刻

| 項目 | 内容 |
|------|------|
| **ケース名** | 深夜・早朝の打刻 |
| **発生条件** | 22:00〜5:00に打刻がある |
| **影響** | 深夜残業の計算、労務管理上の注意 |
| **RPA対応** | TBD |
| **対処手順** | 1. 深夜勤務が正当か確認<br>2. 残業申請の確認 |
| **必要権限** | 管理者 |
| **備考** | 36協定の範囲内か確認 |

---

### 2.4 申請関連

#### EC-申01: 差戻しされた申請の再提出

| 項目 | 内容 |
|------|------|
| **ケース名** | 差戻しされた申請の再提出 |
| **発生条件** | 申請が差戻しされた |
| **影響** | 申請が未完了のまま |
| **RPA対応** | TBD |
| **対処手順** | 1. 差戻し理由を確認<br>2. 修正<br>3. 再申請 |
| **必要権限** | 一般ユーザー |
| **備考** | - |

#### EC-申02: 申請の取消し

| 項目 | 内容 |
|------|------|
| **ケース名** | 申請の取消し |
| **発生条件** | 提出済みの申請を取り消したい |
| **影響** | 承認済みの場合は手続きが異なる |
| **RPA対応** | TBD |
| **対処手順** | （承認前）申請一覧から取消し<br>（承認後）取消申請を別途提出 |
| **必要権限** | 申請者 |
| **備考** | - |

#### EC-申03: 過去日への申請

| 項目 | 内容 |
|------|------|
| **ケース名** | 過去日への申請 |
| **発生条件** | 過去の日付に対して休暇申請等をしたい |
| **影響** | システムで制限されている場合がある |
| **RPA対応** | TBD |
| **対処手順** | 1. システムで可能か確認<br>2. 不可の場合は管理者に依頼 |
| **必要権限** | 一般ユーザー or 管理者 |
| **備考** | 締め後は特に注意 |

---

### 2.5 承認関連

#### EC-承01: 承認者不在

| 項目 | 内容 |
|------|------|
| **ケース名** | 承認者不在 |
| **発生条件** | 承認者が長期不在（休暇・出張等） |
| **影響** | 申請が滞留 |
| **RPA対応** | ❌ 不可 |
| **対処手順** | 1. 代理承認者の設定<br>2. または上位承認者にエスカレーション |
| **必要権限** | 承認者（代理設定）、管理者（エスカレ） |
| **備考** | 事前に代理承認者を設定しておくことを推奨 |

#### EC-承02: 承認期限超過

| 項目 | 内容 |
|------|------|
| **ケース名** | 承認期限超過 |
| **発生条件** | 申請から一定期間承認されていない |
| **影響** | 申請者の休暇取得に影響 |
| **RPA対応** | TBD（督促通知） |
| **対処手順** | 1. 承認者に督促<br>2. 上位承認者にエスカレーション |
| **必要権限** | - |
| **備考** | - |

---

### 2.6 その他

#### EC-他01: システムエラー

| 項目 | 内容 |
|------|------|
| **ケース名** | システムエラー |
| **発生条件** | レコルがエラーで操作できない |
| **影響** | 打刻・申請が不可 |
| **RPA対応** | ❌ 不可 |
| **対処手順** | 1. 時間をおいて再試行<br>2. 復旧後に打刻修正申請 |
| **必要権限** | - |
| **備考** | スクリーンショットを保存しておく |

#### EC-他02: 退職者の処理

| 項目 | 内容 |
|------|------|
| **ケース名** | 退職者の処理 |
| **発生条件** | 退職者の最終勤怠処理 |
| **影響** | 退職日までの勤怠を確定させる必要あり |
| **RPA対応** | TBD |
| **対処手順** | 1. 最終出勤日までの勤怠確認<br>2. 有休残の確認<br>3. 締め処理 |
| **必要権限** | 管理者 |
| **備考** | - |

---

## 3. RPA自動化可否の判断基準

### 3.1 自動化可能

| 条件 | 理由 |
|------|------|
| 入力値が一意に決まる | 判断が不要 |
| エラー時のリカバリが明確 | 例外処理が実装可能 |
| 権限が固定 | 認証が単純 |

### 3.2 自動化不可（手動介入必須）

| 条件 | 理由 |
|------|------|
| 人間の判断が必要 | AI/RPAでは判断できない |
| 権限が動的に変わる | 認証が複雑 |
| 締め後の修正 | 内部統制上、人間の承認が必要 |
| システムエラー | 原因調査が必要 |

---

## 次に埋めるべき項目
1. [ ] 各ケースの対処手順 - 実際の操作を確認して詳細化
2. [ ] RPA対応可否 - 実装状況に合わせて更新
3. [ ] 過去の問い合わせからケースを追加
4. [ ] 各ケースの発生頻度を記録
