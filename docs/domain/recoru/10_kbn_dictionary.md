# 10_kbn_dictionary.md - 勤務区分辞書（最重要）

## このファイルの目的
勤務区分（勤怠種別）の定義・判断基準を一元管理する

## 対象読者
- RPA開発者（入力値の決定）
- 運用担当者（判断基準の確認）
- 問い合わせ対応者（回答の根拠）

## 更新ルール
- **正本**: このファイルが勤務区分の定義の正本
- **マスタとの関係**: `kbn_master.csv` はシステム用。人間が読む定義・判断基準はここに書く
- **追記**: 新規区分は末尾に追加。既存定義の変更は「変更履歴」セクションに記録

---

## 1. 勤務区分一覧（レコル設定値）

### 1.1 通常勤務系

| コード | 区分名 | 出勤日数 | 有休取得日数 | サイボウズ申請 | 用途 |
|-------|--------|:------:|:----------:|--------------|------|
| [01] | 出勤 | 1 | 0 | - | 通常の出勤日 |
| [48] | 出勤【AM】 | 0.5 | 0 | - | 午前のみ出勤 |
| [50] | 出勤【PM】 | 0.5 | 0 | - | 午後のみ出勤 |

### 1.2 公休系（会社指定休日）

| コード | 区分名 | 出勤日数 | 有休取得日数 | サイボウズ申請 | 用途・判定条件 |
|-------|--------|:------:|:----------:|--------------|--------------|
| [55] | 公休 | 0 | 0 | 01フォーム「公休申請日」| 全日の公休 |
| [24] | 公休(半日)1 | 0 | 0 | 01フォーム「公休申請日」+AM | 午前半日公休（午後出勤） |
| [53] | 公休(半日)2 | 0 | 0 | 01フォーム「公休申請日」+PM | 午後半日公休（午前出勤） |
| [18] | 公休：半日 | 0 | 0 | - | 半日公休（旧形式？） |

**暗黙知**:
- 「公休(半日)1」と「公休(半日)2」の使い分けはAM/PMで決定
- [18]は旧形式の可能性。新規は[24][53]を使用

### 1.3 有給休暇系

| コード | 区分名 | 出勤日数 | 有休取得日数 | サイボウズ申請 | 用途・判定条件 |
|-------|--------|:------:|:----------:|--------------|--------------|
| [03] | 有給休暇 | 0 | 1 | 01フォーム「有給休暇申請日」/ 02フォーム「申請区分=有給休暇」| 全日有休 |
| [04] | AM有給 | 0 | 0.5 | 02フォーム + AM指定 | 午前半日有休 |
| [05] | PM有給 | 0 | 0.5 | 02フォーム + PM指定 | 午後半日有休 |
| [07] | 有給休暇(時短) | 0 | TBD | - | 時短勤務者の有休 |
| [54] | 有給(半日) | 0 | 0.5 | - | 半日有休（旧形式？） |
| [06] | ST:有給(半日) | 0 | TBD | - | ST=時短？半日有休 |

**暗黙知**:
- 01フォーム「休暇取得申請書」の「有給休暇申請日」欄 → [03]有給休暇
- 02フォーム「都度有休・その他休暇申請」の「申請区分=有給休暇」→ [03]有給休暇
- AM/PM半休は02フォームで申請時に指定

### 1.4 振替休日系

| コード | 区分名 | 出勤日数 | 有休取得日数 | サイボウズ申請 | 用途・判定条件 |
|-------|--------|:------:|:----------:|--------------|--------------|
| [14] | 振替休日 | 0 | 0 | - | 全日振休 |
| [15] | 振替休日(AM) | 0 | 0 | - | 午前半日振休 |
| [16] | 振替休日(PM) | 0 | 0 | - | 午後半日振休 |
| [52] | 振休(半日) | 0 | 0 | - | 半日振休（旧形式？） |

**暗黙知**:
- 振休は休日出勤の**事前**申請が必要
- 事後の場合は「代休」になる

### 1.5 休日出勤系

| コード | 区分名 | 出勤日数 | 有休取得日数 | サイボウズ申請 | 用途・判定条件 |
|-------|--------|:------:|:----------:|--------------|--------------|
| [19] | 休日出勤 | 1 | 0 | - | 全日の休日出勤 |
| [20] | 休日出勤(AM) | 0.5 | 0 | - | 午前半日の休日出勤 |
| [51] | 休日出勤(PM) | 0.5 | 0 | - | 午後半日の休日出勤 |

### 1.6 特別休暇系

| コード | 区分名 | 出勤日数 | 有休取得日数 | サイボウズ申請 | 用途・判定条件 |
|-------|--------|:------:|:----------:|--------------|--------------|
| [22] | 忌引休暇 | 0 | 0 | 02フォーム「申請区分=忌引」| 忌引休暇 |
| [33] | 慶事休暇 | 0 | 0 | 02フォーム「申請区分=慶事」| 慶事（結婚等）休暇 |
| [21] | 慶事(半日) | 0 | 0 | - | 半日の慶事休暇 |
| [11] | プラス休暇 | 0 | 0 | - | 全日のプラス休暇 |
| [12] | プラス休暇(AM) | 0 | 0 | - | 午前のプラス休暇 |
| [13] | プラス休暇(PM) | 0 | 0 | - | 午後のプラス休暇 |

### 1.7 介護・看護系

| コード | 区分名 | 出勤日数 | 有休取得日数 | サイボウズ申請 | 用途・判定条件 |
|-------|--------|:------:|:----------:|--------------|--------------|
| [10] | 介護休暇 | 0 | 0 | 02フォーム「申請区分=介護」| 介護休暇 |
| [09] | 子の看護休暇 | 0 | 0 | 02フォーム「申請区分=看護」| 子の看護休暇 |
| [23] | 育児休業 | 0 | 0 | - | 育児休業 |

### 1.8 その他

| コード | 区分名 | 出勤日数 | 有休取得日数 | サイボウズ申請 | 用途・判定条件 |
|-------|--------|:------:|:----------:|--------------|--------------|
| [02] | 欠勤 | 0 | 0 | 02フォーム「申請区分=欠勤」| 欠勤（給与控除） |

---

## 2. サイボウズ申請フォームとの対応（重要）

### 2.1 01.休暇取得申請書（月次フォーム）

**構造**: 1つのフォームで複数の公休日・有休日を申請可能

| フォーム項目 | 入力内容 | → レコル勤務区分 |
|-------------|---------|-----------------|
| 公休申請日①〜⑩ | 日付のみ | [55] 公休 |
| 公休申請日①〜⑩ + AM | 日付 + 午前 | [24] 公休(半日)1 |
| 公休申請日①〜⑩ + PM | 日付 + 午後 | [53] 公休(半日)2 |
| 有給休暇申請日①〜② | 日付のみ | [03] 有給休暇 |

**暗黙知**:
- 01フォームは「月初に1ヶ月分まとめて申請」が想定用途
- 公休と有休を同時に申請可能
- 公休は最大10件、有休は最大2件まで

### 2.2 02.都度有休・その他休暇申請（都度フォーム）

**構造**: 1申請で1種類の休暇を申請

| 申請区分（ドロップダウン） | → レコル勤務区分 |
|--------------------------|-----------------|
| 有給休暇 | [03] 有給休暇 / [04] AM有給 / [05] PM有給 |
| 欠勤 | [02] 欠勤 |
| 忌引 | [22] 忌引休暇 |
| 慶事 | [33] 慶事休暇 / [21] 慶事(半日) |
| 介護 | [10] 介護休暇 |
| 看護 | [09] 子の看護休暇 |

**暗黙知**:
- 02フォームは「急な休暇申請」が想定用途
- 1申請内で複数日も可能（例: 忌引3日間）
- AM/PMの半日指定がある場合、対応する半日区分を使用

---

## 3. サイボウズ→レコル マッピングフロー

```
サイボウズ申請を受信
├─ 01.休暇取得申請書？
│   ├─ 公休申請日に値あり？
│   │   ├─ AM指定 → [24] 公休(半日)1
│   │   ├─ PM指定 → [53] 公休(半日)2
│   │   └─ 全日   → [55] 公休
│   │
│   └─ 有給休暇申請日に値あり？
│       └─ 全日   → [03] 有給休暇
│
└─ 02.都度有休・その他休暇申請？
    └─ 申請区分は？
        ├─ 有給休暇 → AM/PM判定
        │            ├─ AM   → [04] AM有給
        │            ├─ PM   → [05] PM有給
        │            └─ 全日 → [03] 有給休暇
        ├─ 欠勤     → [02] 欠勤
        ├─ 忌引     → [22] 忌引休暇
        ├─ 慶事     → AM/PM判定
        │            ├─ 半日 → [21] 慶事(半日)
        │            └─ 全日 → [33] 慶事休暇
        ├─ 介護     → [10] 介護休暇
        └─ 看護     → [09] 子の看護休暇
```

---

## 4. 振休と代休の違い（重要）

| 項目 | 振替休日（振休） | 代休 |
|------|----------------|------|
| 申請タイミング | 休日出勤**前**に申請 | 休日出勤**後**に申請 |
| 給与計算 | 休日割増なし | 休日割増あり |
| 期限 | 同一週内が原則 | 会社規定による |
| レコル区分 | [14] 振替休日 | TBD（代休区分なし？） |

**暗黙知**:
- 32区分の中に「代休」が存在しない → 振休運用が基本の可能性
- または代休は別の方法で管理されている

---

## 5. 半日勤務の組み合わせパターン

| 午前 | 午後 | 使用区分 |
|-----|-----|---------|
| 出勤 | 公休 | [48]出勤【AM】 + [53]公休(半日)2 |
| 公休 | 出勤 | [24]公休(半日)1 + [50]出勤【PM】 |
| 出勤 | 有休 | [48]出勤【AM】 + [05]PM有給 |
| 有休 | 出勤 | [04]AM有給 + [50]出勤【PM】 |
| 公休 | 有休 | [24]公休(半日)1 + [05]PM有給 |
| 有休 | 公休 | [04]AM有給 + [53]公休(半日)2 |

**暗黙知**:
- 半日公休＋半日有休の組み合わせも可能
- 出勤日数・有休取得日数はそれぞれ0.5でカウント

---

## 6. マスタファイルとの対応

### 6.1 正本マスタ
```
C:\ProgramData\RK10\Robots\47出退勤確認\config\kbn_master.csv
```

### 6.2 レコル設定（参照元）
- 勤務区分設定: 【37】インプル勤務区分.pdf
- グループ設定: 【37】インプル_レコルグループ設定.pdf
- 勤務設定: 【37】インプル_レコル勤務設定.pdf

---

## 7. 変更履歴

| 日付 | 変更内容 | 変更者 |
|------|---------|--------|
| 2026-01-17 | 初版作成（テンプレート） | Claude |
| 2026-01-17 | PDFから32勤務区分を反映、マッピングフロー追加 | Claude |

---

## 次に埋めるべき項目
1. [x] 1.1〜1.8 の全テーブル - PDFから実データを転記
2. [x] 2. サイボウズ申請フォームとの対応 - 追加
3. [x] 3. マッピングフロー - 追加
4. [ ] 代休の運用確認 - 32区分に代休が無い理由
5. [ ] [06][07][18]の用途確認 - 時短/旧形式の詳細
6. [ ] グループ設定との関連 - 部門別の区分制限があるか
